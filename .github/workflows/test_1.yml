name: First Test 

on:
  workflow_dispatch:
    inputs:
      MNC:
        description: "Enter the first name"
        required: true
      MCC:
        description: "Enter the last name"
        required: true

jobs:
  first_test:
    runs-on: ubuntu-latest
    
    steps:
      # Checkout the workflow repository
      - name: Checkout workflow repository
        uses: actions/checkout@v3
      
      # Clone the target repository using GITHUB_TOKEN
      - name: Clone target repository
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          git clone https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/vrkshetty/vrkshetty-config-repo.git
          cd vrkshetty-config-repo

      # Create a random file
      - name: Create random file
        run: |
          cd vrkshetty-config-repo
          RANDOM_FILE="random-file-$(date +%s).txt"
          echo "This is a random file created at $(date)" > $RANDOM_FILE
          echo "Created file: $RANDOM_FILE"

      # Commit the changes
      - name: Commit changes
        run: |
          cd vrkshetty-config-repo
          git config user.name "GitHub Action"
          git config user.email "action@github.com"
          git add .
          git commit -m "Add random file"

      # Push the changes to a new branch named after the job ID
      - name: Push changes
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          cd vrkshetty-config-repo
          JOB_ID=${{ github.run_id }}
          git checkout -b "job-${JOB_ID}"
          git push https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/vrkshetty/vrkshetty-config-repo.git "job-${JOB_ID}"
